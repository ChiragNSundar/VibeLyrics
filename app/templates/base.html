<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}VibeLyrics{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">
            <span class="logo">ğŸ¤</span>
            <span class="brand-name">VibeLyrics</span>
        </div>
        <div class="nav-links">
            <a href="{{ url_for('workspace.index') }}"
                class="nav-link {% if request.endpoint and 'workspace' in request.endpoint %}active{% endif %}">
                <span class="icon">âœï¸</span> Workspace
            </a>
            <a href="{{ url_for('journal.index') }}"
                class="nav-link {% if request.endpoint and 'journal' in request.endpoint %}active{% endif %}">
                <span class="icon">ğŸ““</span> Journal
            </a>
            <a href="{{ url_for('references.index') }}"
                class="nav-link {% if request.endpoint and 'references' in request.endpoint %}active{% endif %}">
                <span class="icon">ğŸ“š</span> References
            </a>
            <a href="{{ url_for('education.index') }}"
                class="nav-link {% if request.endpoint and 'education' in request.endpoint %}active{% endif %}">
                <span class="icon">ğŸ“</span> Learn
            </a>
            <a href="{{ url_for('stats.index') }}"
                class="nav-link {% if request.endpoint and 'stats' in request.endpoint %}active{% endif %}">
                <span class="icon">ğŸ“Š</span> Stats
            </a>
            <a href="{{ url_for('settings.index') }}"
                class="nav-link {% if request.endpoint and 'settings' in request.endpoint %}active{% endif %}">
                <span class="icon">âš™ï¸</span> Settings
            </a>
        </div>
    </nav>

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner large"></div>
        <p class="loading-text">Loading...</p>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>

    <footer class="footer">
        <p>VibeLyrics - Collaborative Hip-Hop Lyric Writing</p>
    </footer>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        // Toast notification helper
        window.showToast = function (message, type = 'info', duration = 4000) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const icons = {
                success: 'âœ“',
                error: 'âœ•',
                warning: 'âš ',
                info: 'â„¹'
            };

            toast.innerHTML = `
                <span class="toast-icon">${icons[type] || icons.info}</span>
                <span class="toast-message">${message}</span>
                <button class="toast-close" onclick="this.parentElement.remove()">Ã—</button>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('removing');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        };

        // Loading overlay helpers
        window.showLoading = function (text = 'Loading...') {
            const overlay = document.getElementById('loading-overlay');
            overlay.querySelector('.loading-text').textContent = text;
            overlay.classList.add('active');
        };

        window.hideLoading = function () {
            document.getElementById('loading-overlay').classList.remove('active');
        };
    </script>
    {% block extra_js %}{% endblock %}
</body>

</html>